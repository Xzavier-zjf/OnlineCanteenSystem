-- 高校食堂订餐系统完整真实数据初始化脚本

-- 使用数据库
USE canteen_system;

-- 清空现有数据（按依赖关系顺序）
SET FOREIGN_KEY_CHECKS = 0;
TRUNCATE TABLE order_item;
TRUNCATE TABLE orders;
TRUNCATE TABLE product;
TRUNCATE TABLE product_category;
TRUNCATE TABLE user;
SET FOREIGN_KEY_CHECKS = 1;

-- 插入真实用户数据
INSERT INTO `user` (`username`, `password`, `email`, `phone`, `real_name`, `college`, `address`, `role`, `status`, `create_time`) VALUES
('admin', 'admin123', 'admin@canteen.com', '13800138000', '系统管理员', '信息技术部', '管理中心', 'ADMIN', 1, '2024-01-01 08:00:00'),
('merchant', 'merchant123', 'merchant@canteen.com', '13800138001', '食堂管理员', '后勤服务中心', '食堂一楼', 'MERCHANT', 1, '2024-01-01 08:30:00'),
('zhangsan', 'password123', 'zhangsan@student.edu.cn', '13800138002', '张三', '计算机科学与技术学院', '学生宿舍1号楼201', 'USER', 1, '2024-01-15 09:00:00'),
('lisi', 'password123', 'lisi@student.edu.cn', '13800138003', '李四', '电子信息工程学院', '学生宿舍2号楼305', 'USER', 1, '2024-01-16 10:30:00'),
('wangwu', 'password123', 'wangwu@student.edu.cn', '13800138004', '王五', '机械工程学院', '学生宿舍3号楼108', 'USER', 1, '2024-01-17 11:15:00'),
('zhaoliu', 'password123', 'zhaoliu@student.edu.cn', '13800138005', '赵六', '经济管理学院', '学生宿舍4号楼402', 'USER', 1, '2024-01-18 14:20:00'),
('sunqi', 'password123', 'sunqi@student.edu.cn', '13800138006', '孙七', '外国语学院', '学生宿舍5号楼203', 'USER', 1, '2024-01-19 16:45:00'),
('zhouba', 'password123', 'zhouba@student.edu.cn', '13800138007', '周八', '数学与统计学院', '学生宿舍6号楼301', 'USER', 1, '2024-01-20 08:30:00'),
('wujiu', 'password123', 'wujiu@student.edu.cn', '13800138008', '吴九', '物理与电子学院', '学生宿舍7号楼105', 'USER', 1, '2024-01-21 12:00:00'),
('zhengshi', 'password123', 'zhengshi@student.edu.cn', '13800138009', '郑十', '化学与材料学院', '学生宿舍8号楼404', 'USER', 1, '2024-01-22 15:30:00');

-- 插入餐品分类（真实分类）
INSERT INTO `product_category` (`name`, `description`, `sort_order`, `status`, `create_time`) VALUES
('主食套餐', '各种主食搭配套餐，营养均衡', 1, 1, '2024-01-01 08:00:00'),
('面食类', '各种面条、面食类产品', 2, 1, '2024-01-01 08:00:00'),
('汤品类', '各种汤类，营养丰富', 3, 1, '2024-01-01 08:00:00'),
('素食类', '健康素食，绿色环保', 4, 1, '2024-01-01 08:00:00'),
('荤菜类', '各种肉类菜品', 5, 1, '2024-01-01 08:00:00'),
('饮品类', '各种饮料、果汁', 6, 1, '2024-01-01 08:00:00'),
('小食点心', '各种小食、点心、零食', 7, 1, '2024-01-01 08:00:00'),
('早餐类', '营养早餐，开启美好一天', 8, 1, '2024-01-01 08:00:00');

-- 插入真实餐品数据
INSERT INTO `product` (`name`, `description`, `price`, `category_id`, `image_url`, `stock`, `sales`, `status`, `is_hot`, `rating`, `create_time`) VALUES
-- 主食套餐
('红烧肉套餐', '精选五花肉红烧，配白米饭、时令蔬菜、紫菜蛋花汤', 15.00, 1, '/images/products/hongshaorou.jpg', 50, 156, 1, 1, 4.5, '2024-01-01 08:00:00'),
('宫保鸡丁套餐', '经典川菜宫保鸡丁，配米饭、凉拌黄瓜、冬瓜汤', 14.00, 1, '/images/products/gongbao.jpg', 45, 142, 1, 1, 4.3, '2024-01-01 08:00:00'),
('糖醋里脊套餐', '酸甜可口糖醋里脊，配米饭、清炒时蔬、玉米汤', 16.00, 1, '/images/products/tangcu.jpg', 40, 98, 1, 0, 4.2, '2024-01-01 08:00:00'),
('麻婆豆腐套餐', '经典川菜麻婆豆腐，配米饭、拍黄瓜、海带汤', 12.00, 1, '/images/products/mapo.jpg', 60, 134, 1, 1, 4.4, '2024-01-01 08:00:00'),
('回锅肉套餐', '四川特色回锅肉，配米饭、凉拌豆芽、萝卜汤', 15.50, 1, '/images/products/huiguorou.jpg', 35, 89, 1, 0, 4.1, '2024-01-01 08:00:00'),

-- 面食类
('西红柿鸡蛋面', '新鲜西红柿配土鸡蛋，面条劲道爽滑', 10.00, 2, '/images/products/xihongshi.jpg', 80, 203, 1, 1, 4.6, '2024-01-01 08:00:00'),
('牛肉拉面', '精选牛肉熬制高汤，手工拉面', 18.00, 2, '/images/products/niurou.jpg', 30, 167, 1, 1, 4.7, '2024-01-01 08:00:00'),
('炸酱面', '传统北京炸酱面，酱香浓郁', 13.00, 2, '/images/products/zhajiang.jpg', 50, 125, 1, 0, 4.2, '2024-01-01 08:00:00'),
('酸辣粉', '重庆特色酸辣粉，酸辣开胃', 9.00, 2, '/images/products/suanla.jpg', 70, 189, 1, 1, 4.4, '2024-01-01 08:00:00'),
('兰州拉面', '正宗兰州牛肉面，清汤面条', 16.00, 2, '/images/products/lanzhou.jpg', 25, 156, 1, 0, 4.5, '2024-01-01 08:00:00'),

-- 汤品类
('紫菜蛋花汤', '清淡紫菜蛋花汤，营养丰富', 6.00, 3, '/images/products/zicai.jpg', 100, 245, 1, 1, 4.3, '2024-01-01 08:00:00'),
('冬瓜排骨汤', '清香冬瓜配新鲜排骨，营养滋补', 12.00, 3, '/images/products/donggua.jpg', 40, 178, 1, 0, 4.4, '2024-01-01 08:00:00'),
('番茄鸡蛋汤', '酸甜番茄配嫩滑鸡蛋', 8.00, 3, '/images/products/fanqie.jpg', 80, 198, 1, 1, 4.2, '2024-01-01 08:00:00'),
('玉米排骨汤', '香甜玉米配鲜美排骨', 14.00, 3, '/images/products/yumi.jpg', 35, 145, 1, 0, 4.5, '2024-01-01 08:00:00'),

-- 素食类
('清炒时蔬', '当季新鲜蔬菜清炒，清淡健康', 8.00, 4, '/images/products/shishu.jpg', 90, 167, 1, 0, 4.1, '2024-01-01 08:00:00'),
('麻辣豆腐', '嫩滑豆腐配麻辣调料', 10.00, 4, '/images/products/mala.jpg', 60, 134, 1, 1, 4.3, '2024-01-01 08:00:00'),
('凉拌黄瓜', '爽脆黄瓜凉拌，清爽开胃', 6.00, 4, '/images/products/huangua.jpg', 100, 189, 1, 0, 4.0, '2024-01-01 08:00:00'),
('蒜蓉菠菜', '新鲜菠菜配蒜蓉炒制', 9.00, 4, '/images/products/bocai.jpg', 70, 156, 1, 0, 4.2, '2024-01-01 08:00:00'),

-- 荤菜类
('红烧鱼块', '新鲜鱼肉红烧，鲜美可口', 20.00, 5, '/images/products/hongshaoyu.jpg', 25, 123, 1, 0, 4.6, '2024-01-01 08:00:00'),
('口水鸡', '四川特色口水鸡，麻辣鲜香', 18.00, 5, '/images/products/koushuiji.jpg', 30, 145, 1, 1, 4.4, '2024-01-01 08:00:00'),
('蒜蓉排骨', '蒜香浓郁的排骨', 22.00, 5, '/images/products/suanrongpaigu.jpg', 20, 98, 1, 0, 4.3, '2024-01-01 08:00:00'),

-- 饮品类
('鲜榨橙汁', '新鲜橙子现榨，维C丰富', 8.00, 6, '/images/products/orange.jpg', 100, 234, 1, 1, 4.5, '2024-01-01 08:00:00'),
('柠檬蜂蜜茶', '清香柠檬配天然蜂蜜', 10.00, 6, '/images/products/lemon.jpg', 80, 198, 1, 0, 4.3, '2024-01-01 08:00:00'),
('绿豆汤', '清热解毒绿豆汤', 5.00, 6, '/images/products/lvdou.jpg', 120, 267, 1, 1, 4.2, '2024-01-01 08:00:00'),
('酸梅汤', '传统酸梅汤，生津止渴', 6.00, 6, '/images/products/suanmei.jpg', 100, 189, 1, 0, 4.1, '2024-01-01 08:00:00'),

-- 小食点心
('小笼包', '上海风味小笼包，皮薄馅大', 12.00, 7, '/images/products/xiaolongbao.jpg', 60, 178, 1, 1, 4.6, '2024-01-01 08:00:00'),
('煎饺', '香脆煎饺，外焦内嫩', 10.00, 7, '/images/products/jianjiao.jpg', 50, 145, 1, 0, 4.2, '2024-01-01 08:00:00'),
('蒸蛋糕', '松软香甜蒸蛋糕', 8.00, 7, '/images/products/dangao.jpg', 40, 123, 1, 0, 4.0, '2024-01-01 08:00:00'),
('红豆饼', '香甜红豆馅饼', 6.00, 7, '/images/products/hongdou.jpg', 80, 167, 1, 0, 4.1, '2024-01-01 08:00:00'),

-- 早餐类
('豆浆油条', '经典早餐搭配，营养美味', 8.00, 8, '/images/products/doujiang.jpg', 100, 289, 1, 1, 4.4, '2024-01-01 08:00:00'),
('小米粥配咸菜', '养胃小米粥配爽口咸菜', 6.00, 8, '/images/products/xiaomi.jpg', 120, 234, 1, 1, 4.2, '2024-01-01 08:00:00'),
('鸡蛋灌饼', '香脆灌饼配鲜美鸡蛋', 10.00, 8, '/images/products/jidanguanbing.jpg', 80, 198, 1, 0, 4.3, '2024-01-01 08:00:00'),
('蒸蛋羹', '嫩滑蒸蛋羹，营养丰富', 7.00, 8, '/images/products/zhengdan.jpg', 90, 167, 1, 0, 4.1, '2024-01-01 08:00:00');

-- 插入真实订单数据
INSERT INTO `orders` (`order_no`, `user_id`, `total_amount`, `status`, `remark`, `create_time`, `update_time`) VALUES
('CT20240125143022001', 3, 25.00, 'COMPLETED', '不要太辣', '2024-01-25 14:30:22', '2024-01-25 15:15:30'),
('CT20240125150845002', 4, 18.00, 'COMPLETED', '', '2024-01-25 15:08:45', '2024-01-25 15:45:20'),
('CT20240126120330003', 5, 32.00, 'COMPLETED', '多加点汤', '2024-01-26 12:03:30', '2024-01-26 12:40:15'),
('CT20240126183015004', 6, 14.00, 'COMPLETED', '', '2024-01-26 18:30:15', '2024-01-26 19:05:45'),
('CT20240127114520005', 7, 28.50, 'COMPLETED', '餐具要干净', '2024-01-27 11:45:20', '2024-01-27 12:20:30'),
('CT20240127195530006', 8, 22.00, 'COMPLETED', '', '2024-01-27 19:55:30', '2024-01-27 20:30:15'),
('CT20240128130845007', 9, 16.00, 'COMPLETED', '少放盐', '2024-01-28 13:08:45', '2024-01-28 13:45:20'),
('CT20240128174020008', 10, 35.00, 'COMPLETED', '', '2024-01-28 17:40:20', '2024-01-28 18:15:30'),
('CT20240129121530009', 3, 19.00, 'COMPLETED', '打包带走', '2024-01-29 12:15:30', '2024-01-29 12:50:45'),
('CT20240129164515010', 4, 26.00, 'COMPLETED', '', '2024-01-29 16:45:15', '2024-01-29 17:20:30'),
('CT20240130110230011', 5, 21.00, 'PAID', '尽快制作', '2024-01-30 11:02:30', '2024-01-30 11:02:30'),
('CT20240130153045012', 6, 15.00, 'PREPARING', '', '2024-01-30 15:30:45', '2024-01-30 15:35:20'),
('CT20240130182020013', 7, 29.00, 'READY', '已制作完成', '2024-01-30 18:20:20', '2024-01-30 18:55:30'),
('CT20240131094515014', 8, 12.00, 'PENDING', '', '2024-01-31 09:45:15', '2024-01-31 09:45:15'),
('CT20240131133030015', 9, 24.00, 'CANCELLED', '临时有事取消', '2024-01-31 13:30:30', '2024-01-31 13:35:45');

-- 插入订单详情数据
INSERT INTO `order_item` (`order_id`, `product_id`, `product_name`, `quantity`, `price`, `subtotal`) VALUES
-- 订单1: CT20240125143022001 (user_id=3, total=25.00)
(1, 1, '红烧肉套餐', 1, 15.00, 15.00),
(1, 11, '紫菜蛋花汤', 1, 6.00, 6.00),
(1, 23, '鲜榨橙汁', 1, 8.00, 8.00),

-- 订单2: CT20240125150845002 (user_id=4, total=18.00)
(2, 7, '牛肉拉面', 1, 18.00, 18.00),

-- 订单3: CT20240126120330003 (user_id=5, total=32.00)
(3, 2, '宫保鸡丁套餐', 1, 14.00, 14.00),
(3, 6, '西红柿鸡蛋面', 1, 10.00, 10.00),
(3, 21, '小笼包', 1, 12.00, 12.00),

-- 订单4: CT20240126183015004 (user_id=6, total=14.00)
(4, 4, '麻婆豆腐套餐', 1, 12.00, 12.00),
(4, 17, '凉拌黄瓜', 1, 6.00, 6.00),

-- 订单5: CT20240127114520005 (user_id=7, total=28.50)
(5, 5, '回锅肉套餐', 1, 15.50, 15.50),
(5, 9, '酸辣粉', 1, 9.00, 9.00),
(5, 23, '鲜榨橙汁', 1, 8.00, 8.00),

-- 订单6: CT20240127195530006 (user_id=8, total=22.00)
(6, 20, '口水鸡', 1, 18.00, 18.00),
(6, 17, '凉拌黄瓜', 1, 6.00, 6.00),

-- 订单7: CT20240128130845007 (user_id=9, total=16.00)
(7, 16, '麻辣豆腐', 1, 10.00, 10.00),
(7, 17, '凉拌黄瓜', 1, 6.00, 6.00),

-- 订单8: CT20240128174020008 (user_id=10, total=35.00)
(8, 1, '红烧肉套餐', 1, 15.00, 15.00),
(8, 7, '牛肉拉面', 1, 18.00, 18.00),
(8, 11, '紫菜蛋花汤', 1, 6.00, 6.00),

-- 订单9: CT20240129121530009 (user_id=3, total=19.00)
(9, 6, '西红柿鸡蛋面', 1, 10.00, 10.00),
(9, 9, '酸辣粉', 1, 9.00, 9.00),

-- 订单10: CT20240129164515010 (user_id=4, total=26.00)
(10, 3, '糖醋里脊套餐', 1, 16.00, 16.00),
(10, 21, '小笼包', 1, 12.00, 12.00),

-- 订单11: CT20240130110230011 (user_id=5, total=21.00)
(11, 2, '宫保鸡丁套餐', 1, 14.00, 14.00),
(11, 15, '清炒时蔬', 1, 8.00, 8.00),

-- 订单12: CT20240130153045012 (user_id=6, total=15.00)
(12, 4, '麻婆豆腐套餐', 1, 12.00, 12.00),
(12, 11, '紫菜蛋花汤', 1, 6.00, 6.00),

-- 订单13: CT20240130182020013 (user_id=7, total=29.00)
(13, 1, '红烧肉套餐', 1, 15.00, 15.00),
(13, 12, '冬瓜排骨汤', 1, 12.00, 12.00),
(13, 11, '紫菜蛋花汤', 1, 6.00, 6.00),

-- 订单14: CT20240131094515014 (user_id=8, total=12.00)
(14, 4, '麻婆豆腐套餐', 1, 12.00, 12.00),

-- 订单15: CT20240131133030015 (user_id=9, total=24.00) - 已取消
(15, 7, '牛肉拉面', 1, 18.00, 18.00),
(15, 17, '凉拌黄瓜', 1, 6.00, 6.00);

-- 查看插入的数据统计
SELECT '用户统计' as '数据类型', COUNT(*) as '数量' FROM user
UNION ALL
SELECT '商品分类统计', COUNT(*) FROM product_category
UNION ALL
SELECT '商品统计', COUNT(*) FROM product
UNION ALL
SELECT '订单统计', COUNT(*) FROM orders
UNION ALL
SELECT '订单详情统计', COUNT(*) FROM order_item;

-- 显示一些统计信息
SELECT 
    '数据初始化完成' as '状态',
    (SELECT COUNT(*) FROM user WHERE role = 'USER') as '普通用户数',
    (SELECT COUNT(*) FROM product WHERE status = 1) as '上架商品数',
    (SELECT COUNT(*) FROM orders WHERE status = 'COMPLETED') as '已完成订单数',
    (SELECT ROUND(SUM(total_amount), 2) FROM orders WHERE status = 'COMPLETED') as '总交易金额';