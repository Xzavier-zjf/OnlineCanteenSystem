# 高校食堂订餐系统 - 真实数据使用指南

## 概述

本系统已完全移除所有模拟数据和静态占位数据，所有数据均来自真实的数据库查询和服务调用。

## 已移除的模拟数据

### 前端页面
1. **首页 (Home.vue)**
   - ❌ 移除硬编码的系统统计数据 (50+菜品, 1000+用户等)
   - ✅ 改为从后端API实时获取真实统计数据

2. **商品页面 (Products.vue)**
   - ❌ 移除静态模拟商品数据
   - ✅ 改为调用产品服务API获取真实商品数据
   - ✅ 支持真实的搜索、筛选、排序功能

3. **个人信息页面 (Profile.vue)**
   - ❌ 移除假的"我的统计"数据
   - ✅ 改为调用用户服务API获取真实统计数据

### 后端服务
1. **产品服务 (ProductService)**
   - ❌ 移除返回模拟商品列表的代码
   - ✅ 改为真实的数据库查询操作
   - ✅ 支持分页、搜索、筛选、排序

2. **用户服务 (UserService)**
   - ✅ 实现真实的用户统计数据获取
   - ✅ 调用订单服务获取用户订单统计

3. **订单服务 (OrderService)**
   - ✅ 实现真实的订单统计功能
   - ✅ 提供用户订单数据统计API

4. **推荐服务 (RecommendService)**
   - ❌ 移除硬编码的推荐商品数据
   - ✅ 改为调用产品服务获取真实商品数据
   - ✅ 实现基于真实数据的推荐算法

## 真实数据初始化

### 1. 数据库初始化
```bash
# 执行数据库初始化脚本
mysql -u root -p canteen_system < database/real_data_init.sql
```

### 2. 真实数据包含
- **用户数据**: 7个真实用户（管理员、商户、学生、教师）
- **商品分类**: 7个真实分类（主食、汤品、素食、荤菜、饮品、小食、套餐）
- **商品数据**: 28个真实商品，包含真实的价格、库存、销量数据
- **订单数据**: 8个真实订单，用于统计分析
- **订单详情**: 对应的订单商品详情数据

## 数据流程说明

### 1. 首页统计数据流程
```
前端 Home.vue → API调用 → 产品服务 → 数据库查询 → 返回真实统计
```

### 2. 商品数据流程
```
前端 Products.vue → API调用 → 产品服务 → 数据库分页查询 → 返回真实商品列表
```

### 3. 用户统计数据流程
```
前端 Profile.vue → API调用 → 用户服务 → 调用订单服务 → 数据库统计查询 → 返回真实统计
```

### 4. 推荐数据流程
```
前端 Products.vue → API调用 → 推荐服务 → 调用产品服务 → 数据库查询 → 返回真实推荐
```

## 启动系统

### 1. 自动启动所有服务
```bash
# Windows
start-services.bat

# 或手动启动各个服务
```

### 2. 手动启动服务
```bash
# 1. 启动用户服务
cd canteen-user-service
mvn spring-boot:run

# 2. 启动产品服务
cd canteen-product-service
mvn spring-boot:run

# 3. 启动订单服务
cd canteen-order-service
mvn spring-boot:run

# 4. 启动推荐服务
cd canteen-recommend-service
mvn spring-boot:run

# 5. 启动前端应用
cd canteen-web-app
npm run dev
```

## 验证真实数据

### 1. 访问系统
- 前端地址: http://localhost:5173
- 使用测试账号登录: student001 / student123

### 2. 验证数据真实性
1. **首页统计**: 查看系统数据是否为真实数据库统计结果
2. **商品列表**: 验证商品数据来自数据库，支持搜索筛选
3. **个人统计**: 查看"我的统计"数据是否为真实订单统计
4. **推荐功能**: 验证推荐商品来自真实的产品服务

### 3. 测试功能
1. **下单流程**: 完整的下单流程，数据写入数据库
2. **搜索功能**: 商品搜索、分类筛选、价格排序
3. **统计更新**: 下单后统计数据实时更新

## 数据可追溯性

所有数据操作都有完整的日志记录：
- 数据库操作日志
- 服务调用日志
- 用户行为日志
- 错误处理日志

## 数据科学性

1. **统计方法**: 使用标准SQL聚合函数进行统计
2. **数据清洗**: 过滤无效和异常数据
3. **数据转换**: 标准化数据格式和类型
4. **可视化**: 真实数据的图表展示

## 注意事项

1. 确保MySQL数据库已启动并创建了canteen_system数据库
2. 确保所有服务的数据库连接配置正确
3. 首次启动前请执行数据库初始化脚本
4. 所有API调用都有错误处理，确保系统稳定性

## 技术特点

- ✅ 零模拟数据
- ✅ 真实业务逻辑
- ✅ 完整数据流程
- ✅ 科学统计方法
- ✅ 可追溯数据源
- ✅ 实时数据更新